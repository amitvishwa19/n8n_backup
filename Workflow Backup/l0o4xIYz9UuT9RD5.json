{"createdAt":"2025-09-24T04:03:57.939Z","updatedAt":"2025-09-24T04:16:05.000Z","id":"l0o4xIYz9UuT9RD5","name":"My workflow 3","active":false,"isArchived":false,"nodes":[{"parameters":{},"id":"9a3204a5-35d9-4b16-981b-f5db9443502c","name":"On clicking 'execute'","type":"n8n-nodes-base.manualTrigger","position":[-288,-16],"typeVersion":1},{"parameters":{"content":"## Subworkflow","height":750.8363163824032,"width":2086.845881354743,"color":6},"id":"efd0264d-b252-458e-8209-cb0e08ffdc52","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-736,352],"typeVersion":1},{"parameters":{"filters":{},"requestOptions":{}},"id":"5b9396c5-8f32-477b-9b8e-009376979688","name":"n8n","type":"n8n-nodes-base.n8n","position":[-32,80],"typeVersion":1,"credentials":{"n8nApi":{"id":"1nXgG54n3mhBimUi","name":"n8n account"}}},{"parameters":{"assignments":{"assignments":[{"id":"8d513345-6484-431f-afb7-7cf045c90f4f","name":"Done","type":"boolean","value":true}]},"options":{}},"id":"463ada94-f151-481b-8917-78fd67d72fe4","name":"Return","type":"n8n-nodes-base.set","position":[1152,560],"typeVersion":3.3},{"parameters":{"url":"={{ $json.download_url }}","options":{}},"id":"89d5df34-b658-44ab-9481-944c4cef0bc6","name":"Get File","type":"n8n-nodes-base.httpRequest","position":[256,432],"typeVersion":4.2},{"parameters":{"conditions":{"options":{"version":1,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"45ce825e-9fa6-430c-8931-9aaf22c42585","operator":{"type":"string","operation":"empty","singleValue":true},"leftValue":"={{ $json.content }}","rightValue":""},{"id":"9619a55f-7fb1-4f24-b1a7-7aeb82365806","operator":{"type":"string","operation":"notExists","singleValue":true},"leftValue":"={{ $json.error }}","rightValue":""}]},"options":{}},"id":"20bb4aac-0399-4203-90c3-79871fc4c1cf","name":"If file too large","type":"n8n-nodes-base.if","position":[48,464],"typeVersion":2},{"parameters":{},"id":"26db5e2c-6991-49fb-9eb7-f4daf4f0bc9b","name":"Merge Items","type":"n8n-nodes-base.merge","position":[48,720],"typeVersion":2},{"parameters":{"jsCode":"const orderJsonKeys = (jsonObj) => {\n  const ordered = {};\n  Object.keys(jsonObj).sort().forEach(key => {\n    ordered[key] = jsonObj[key];\n  });\n  return ordered;\n}\n\n// Check if file returned with content\nif (Object.keys($input.all()[0].json).includes(\"content\")) {\n  // Decode base64 content and parse JSON\n  const origWorkflow = JSON.parse(Buffer.from($input.all()[0].json.content, 'base64').toString());\n  const n8nWorkflow = $input.all()[1].json;\n  \n  // Order JSON objects\n  const orderedOriginal = orderJsonKeys(origWorkflow);\n  const orderedActual = orderJsonKeys(n8nWorkflow);\n\n  // Determine difference\n  if (JSON.stringify(orderedOriginal) === JSON.stringify(orderedActual)) {\n    $input.all()[0].json.github_status = \"same\";\n  } else {\n    $input.all()[0].json.github_status = \"different\";\n    $input.all()[0].json.n8n_data_stringy = JSON.stringify(orderedActual, null, 2);\n  }\n  $input.all()[0].json.content_decoded = orderedOriginal;\n// No file returned / new workflow\n} else if (Object.keys($input.all()[0].json).includes(\"data\")) {\n  const origWorkflow = JSON.parse($input.all()[0].json.data);\n  const n8nWorkflow = $input.all()[1].json;\n  \n  // Order JSON objects\n  const orderedOriginal = orderJsonKeys(origWorkflow);\n  const orderedActual = orderJsonKeys(n8nWorkflow);\n\n  // Determine difference\n  if (JSON.stringify(orderedOriginal) === JSON.stringify(orderedActual)) {\n    $input.all()[0].json.github_status = \"same\";\n  } else {\n    $input.all()[0].json.github_status = \"different\";\n    $input.all()[0].json.n8n_data_stringy = JSON.stringify(orderedActual, null, 2);\n  }\n  $input.all()[0].json.content_decoded = orderedOriginal;\n\n} else {\n  // Order JSON object\n  const n8nWorkflow = $input.all()[1].json;\n  const orderedActual = orderJsonKeys(n8nWorkflow);\n  \n  // Proper formatting\n  $input.all()[0].json.github_status = \"new\";\n  $input.all()[0].json.n8n_data_stringy = JSON.stringify(orderedActual, null, 2);\n}\n\n// Return items\nreturn $input.all();"},"id":"5d16b31f-58be-4607-87be-d143b353cce3","name":"isDiffOrNew","type":"n8n-nodes-base.code","position":[256,720],"typeVersion":1},{"parameters":{"dataType":"string","value1":"={{$json.github_status}}","rules":{"rules":[{"value2":"same"},{"value2":"different","output":1},{"value2":"new","output":2}]}},"id":"792b4c3e-e09c-4ca9-bd00-9567bff8a182","name":"Check Status","type":"n8n-nodes-base.switch","position":[464,720],"typeVersion":1},{"parameters":{},"id":"cc3951ea-1dda-44e9-bae4-533fd49ed959","name":"Same file - Do nothing","type":"n8n-nodes-base.noOp","position":[688,560],"typeVersion":1},{"parameters":{},"id":"92aea70d-5d6f-481d-8c74-42991dffdaed","name":"File is different","type":"n8n-nodes-base.noOp","position":[688,720],"typeVersion":1},{"parameters":{},"id":"ea9ed7c3-2060-4731-9d7f-94542abdcf49","name":"File is new","type":"n8n-nodes-base.noOp","position":[688,880],"typeVersion":1},{"parameters":{"resource":"file","owner":{"__rl":true,"mode":"name","value":"={{ $('Globals').item.json.repo.owner }}"},"repository":{"__rl":true,"mode":"name","value":"={{ $('Globals').item.json.repo.name }}"},"filePath":"={{ $('Globals').item.json.repo.path }}{{$('Execute Workflow Trigger').first().json.id}}.json","fileContent":"={{$('isDiffOrNew').item.json[\"n8n_data_stringy\"]}}","commitMessage":"={{$('Execute Workflow Trigger').first().json.name}} ({{$json.github_status}})"},"id":"3137da71-a216-44ce-8bae-44a51dc57ec6","name":"Create new file","type":"n8n-nodes-base.github","position":[912,880],"webhookId":"e5e4ce8b-74a3-4b94-83ca-351edc280faf","typeVersion":1,"credentials":{"githubApi":{"id":"bbmcSokLK6Dm4sdi","name":"GitHub account"}}},{"parameters":{"resource":"file","operation":"edit","owner":{"__rl":true,"mode":"name","value":"={{ $('Globals').item.json.repo.owner }}"},"repository":{"__rl":true,"mode":"name","value":"={{ $('Globals').item.json.repo.name }}"},"filePath":"={{ $('Globals').item.json.repo.path }}{{$('Execute Workflow Trigger').first().json.id}}.json","fileContent":"={{$('isDiffOrNew').item.json[\"n8n_data_stringy\"]}}","commitMessage":"={{$('Execute Workflow Trigger').first().json.name}} ({{$json.github_status}})"},"id":"d675b8a7-f9fc-407b-9023-795b3e657fd8","name":"Edit existing file","type":"n8n-nodes-base.github","position":[912,704],"webhookId":"a57e71de-4960-4d25-a59f-1a9e2e96aff5","typeVersion":1,"credentials":{"githubApi":{"id":"bbmcSokLK6Dm4sdi","name":"GitHub account"}}},{"parameters":{"options":{}},"id":"60e75b12-e3d3-4d15-a781-86ca0980d1ef","name":"Loop Over Items","type":"n8n-nodes-base.splitInBatches","position":[176,80],"typeVersion":3},{"parameters":{"rule":{"interval":[{"field":"hours","hoursInterval":2}]}},"id":"4d637c5b-92c6-403f-b3b0-b7b1cd0e258d","name":"Schedule Trigger","type":"n8n-nodes-base.scheduleTrigger","position":[-288,176],"typeVersion":1.2},{"parameters":{"content":"## Backup to GitHub \nThis workflow will backup all instance workflows to GitHub.\n\nThe files are saved `ID.json` for the filename.\n\n### Setup\nOpen `Globals` node and update the values below ðŸ‘‡\n\n- **repo.owner:** your Github username\n- **repo.name:** the name of your repository\n- **repo.path:** the folder to use within the repository. If it doesn't exist it will be created.\n\n\nIf your username was `john-doe` and your repository was called `n8n-backups` and you wanted the workflows to go into a `workflows` folder you would set:\n\n- repo.owner - john-doe\n- repo.name - n8n-backups\n- repo.path - workflows/\n\n\nThe workflow calls itself using a subworkflow, to help reduce memory usage.","height":601,"width":371,"color":4},"id":"21c6d42f-8736-48f6-8f66-4bc2d5f156ca","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[-736,-288],"typeVersion":1},{"parameters":{"content":"## Main workflow loop","height":435,"width":886,"color":7},"id":"c7a919dc-9695-4b41-91b5-4e6a311ee389","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[-336,-96],"typeVersion":1},{"parameters":{"resource":"file","operation":"get","owner":{"__rl":true,"mode":"name","value":"={{ $json.repo.owner }}"},"repository":{"__rl":true,"mode":"name","value":"={{ $json.repo.name }}"},"filePath":"={{ $json.repo.path }}{{ $('Execute Workflow Trigger').item.json.id }}.json","asBinaryProperty":false,"additionalParameters":{}},"id":"72551d08-8ab8-44b6-ab91-793e541b49df","name":"Get file data","type":"n8n-nodes-base.github","position":[-144,464],"webhookId":"743111c3-2c21-4658-8097-a9fe966f43d2","typeVersion":1,"alwaysOutputData":true,"credentials":{"githubApi":{"id":"bbmcSokLK6Dm4sdi","name":"GitHub account"}},"continueOnFail":true},{"parameters":{"assignments":{"assignments":[{"id":"6cf546c5-5737-4dbd-851b-17d68e0a3780","name":"repo.owner","type":"string","value":"amitvishwa19"},{"id":"452efa28-2dc6-4ea3-a7a2-c35d100d0382","name":"repo.name","type":"string","value":"n8n-backup-v2"},{"id":"81c4dc54-86bf-4432-a23f-22c7ea831e74","name":"repo.path","type":"string","value":"workflows/"}]},"options":{}},"id":"94a31ba6-e431-4be2-a3a8-4d87be46e97b","name":"Globals","type":"n8n-nodes-base.set","position":[-368,624],"typeVersion":3.4},{"parameters":{"content":"## Edit this node ðŸ‘‡","height":80,"width":150,"color":4},"id":"15fff895-11dc-4005-83ae-880e41a84848","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[-416,512],"typeVersion":1},{"parameters":{"inputSource":"passthrough"},"id":"634088d1-4bc4-4b64-963e-a79f822b052d","name":"Execute Workflow Trigger","type":"n8n-nodes-base.executeWorkflowTrigger","position":[-656,736],"typeVersion":1.1},{"parameters":{"workflowId":{"__rl":true,"mode":"id","value":"={{ $workflow.id }}"},"workflowInputs":{"value":{},"schema":[],"mappingMode":"defineBelow","matchingColumns":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"mode":"each","options":{}},"id":"001e272f-1c27-4c32-8e55-778f8950fe85","name":"Execute Workflow","type":"n8n-nodes-base.executeWorkflow","position":[400,96],"typeVersion":1.2},{"parameters":{"content":"### ðŸ’¡ **Want to learn advanced n8n skills and earn money building workflows?**\nâ€Ž â€Ž â€Ž â€Ž â€Ž â€Ž â€Ž â€ŽCheck out [Scrapes Academy](https://www.skool.com/scrapes/about?ref=21f10ad99f4d46ba9b8aaea8c9f58c34)","width":640,"color":4},"id":"7c1420ec-d487-40fa-b867-35e9f3bcde5c","name":"Sticky Note16","type":"n8n-nodes-base.stickyNote","position":[-336,-288],"typeVersion":1}],"connections":{"n8n":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Globals":{"main":[[{"node":"Get file data","type":"main","index":0}]]},"Get File":{"main":[[{"node":"Merge Items","type":"main","index":0}]]},"File is new":{"main":[[{"node":"Create new file","type":"main","index":0}]]},"Merge Items":{"main":[[{"node":"isDiffOrNew","type":"main","index":0}]]},"isDiffOrNew":{"main":[[{"node":"Check Status","type":"main","index":0}]]},"Check Status":{"main":[[{"node":"Same file - Do nothing","type":"main","index":0}],[{"node":"File is different","type":"main","index":0}],[{"node":"File is new","type":"main","index":0}]]},"Get file data":{"main":[[{"node":"If file too large","type":"main","index":0}]]},"Create new file":{"main":[[{"node":"Return","type":"main","index":0}]]},"Loop Over Items":{"main":[[],[{"node":"Execute Workflow","type":"main","index":0}]]},"Execute Workflow":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"n8n","type":"main","index":0}]]},"File is different":{"main":[[{"node":"Edit existing file","type":"main","index":0}]]},"If file too large":{"main":[[{"node":"Get File","type":"main","index":0}],[{"node":"Merge Items","type":"main","index":0}]]},"Edit existing file":{"main":[[{"node":"Return","type":"main","index":0}]]},"On clicking 'execute'":{"main":[[{"node":"n8n","type":"main","index":0}]]},"Same file - Do nothing":{"main":[[{"node":"Return","type":"main","index":0}]]},"Execute Workflow Trigger":{"main":[[{"node":"Globals","type":"main","index":0},{"node":"Merge Items","type":"main","index":1}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"60a2d9ec-5be7-4fe5-85b1-d4d6b58d18a9","triggerCount":0,"shared":[{"createdAt":"2025-09-24T04:03:57.945Z","updatedAt":"2025-09-24T04:03:57.945Z","role":"workflow:owner","workflowId":"l0o4xIYz9UuT9RD5","projectId":"Jhxl57jBaP5qwf3G"}],"tags":[]}